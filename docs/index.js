let allVoices=[];loadConfig(),loadVoices();function loadConfig(){localStorage.getItem("darkMode")==1&&(document.documentElement.dataset.theme="dark")}function toggleDarkMode(){localStorage.getItem("darkMode")==1?(localStorage.setItem("darkMode",0),delete document.documentElement.dataset.theme):(localStorage.setItem("darkMode",1),document.documentElement.dataset.theme="dark")}function loadVoices(){const a=new Promise(function(b){let a=speechSynthesis.getVoices();if(a.length!==0)b(a);else{let c=!1;speechSynthesis.addEventListener("voiceschanged",function(){c=!0,a=speechSynthesis.getVoices(),b(a)}),setTimeout(()=>{c||document.getElementById("noTTS").classList.remove("d-none")},1e3)}});a.then(a=>{allVoices=a,addLangRadioBox()})}function showVoiceInfo(a){document.getElementById("voiceDefault").textContent=a.default,document.getElementById("voiceLocalService").textContent=a.localService,document.getElementById("voiceName").textContent=a.name,document.getElementById("voiceURI").textContent=a.voiceURI}function speak(d){speechSynthesis.cancel();const a=new SpeechSynthesisUtterance(d),e=document.getElementById("langRadio").lang.value,b=allVoices.filter(a=>a.lang==e),c=b[Math.floor(Math.random()*b.length)];return showVoiceInfo(c),a.voice=c,a.lang=document.getElementById("langRadio").lang.value,a.pitch=document.getElementById("pitch").value,a.rate=document.getElementById("rate").value,a.volume=document.getElementById("volume").value,speechSynthesis.speak(a),a}function addLangRadioBox(){const a=document.getElementById("langRadio");allVoices.sort((a,b)=>a.lang<b.lang?-1:a.lang>b.lang?1:0).forEach((c,f)=>{const d=document.createElement("div");d.className="form-check form-check-inline";const b=document.createElement("input");b.className="form-check-input",b.name="lang",b.type="radio",b.id="radio"+f,b.value=c.lang;const e=document.createElement("label");e.className="from-check-label",e.for="radio"+f,e.textContent=c.lang,d.appendChild(b),d.appendChild(e),a.appendChild(d),(c.lang=="en-US"||c.lang=="en_US")&&(b.checked=!0)})}function resetPitch(){document.getElementById("pitch").value=1}function resetRate(){document.getElementById("rate").value=1}function resetVolume(){document.getElementById("volume").value=1}function search(){const a=document.getElementById("searchText").value;speak(a)}document.addEventListener("keydown",function(a){a.key=="Enter"&&search()},!1),document.getElementById("toggleDarkMode").onclick=toggleDarkMode,document.getElementById("search").onclick=search,document.getElementById("resetPitch").onclick=resetPitch,document.getElementById("resetRate").onclick=resetRate,document.getElementById("resetVolume").onclick=resetVolume